import{_ as o,r as p,o as c,c as i,a as n,b as s,d as t,e}from"./app-4d1d3ef4.js";const l={},u=n("h2",{id:"微信-vs-web",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#微信-vs-web","aria-hidden":"true"},"#"),s(" 微信 vs web")],-1),r=n("li",null,[s("微信中事件对象没有 "),n("code",null,"event.preventDefault"),s(" 和 "),n("code",null,"event.stopPropagation"),s(",正常冒泡事件绑定 "),n("code",null,'bind:tap="handler"'),s(" ,如果要阻止事件冒泡需要 "),n("code",null,'catch:tap="handler"')],-1),d={href:"https://blog.csdn.net/weixin_44052055/article/details/119408920",target:"_blank",rel:"noopener noreferrer"},k=n("code",null,"background-image",-1),v={href:"https://blog.csdn.net/Shimeng_1989/article/details/127651522",target:"_blank",rel:"noopener noreferrer"},m=e(`<div class="language-css line-numbers-mode" data-ext="css"><pre class="language-css"><code><span class="token comment">/*解决方案：全局设置图片自适应*/</span>
<span class="token selector">image</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> auto
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),b={href:"https://developers.weixin.qq.com/community/develop/article/doc/00008a245604d8a1a8ce322345bc13",target:"_blank",rel:"noopener noreferrer"},g=n("li",null,[s("微信节点高度计算不准确:需要加延迟之后才可以计算准确，"),n("code",null,"wx.nextTick"),s(" 中也不行，不知道为啥")],-1),h=e(`<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">onReady</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">computeHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>增强滑动效果: <code>scroll-view</code> 嵌套在 <code>swiper</code> 中</li></ul><div class="language-wxml line-numbers-mode" data-ext="wxml"><pre class="language-wxml"><code>
&lt;swiper indicator-dots=&quot;{{false}}&quot; style=&quot;height:{{listHeight}}px&quot;
        autoplay=&quot;{{false}}&quot; interval=&quot;{{interval}}&quot; vertical=&quot;{{true}}&quot; duration=&quot;{{1000}}&quot;&gt;
    &lt;swiper-item&gt;
        &lt;scroll-view class=&quot;list-wrapper&quot; scroll-y=&quot;true&quot; style=&quot;height: {{listHeight}}px&quot;
                     show-scrollbar=&quot;{{false}}&quot; lower-threshold=&quot;{{50}}&quot;
                     enhanced=&quot;{{true}}&quot; bindscrolltolower=&quot;scrollToLower&quot;&gt;
        &lt;/scroll-view&gt;
    &lt;/swiper-item&gt;
&lt;/swiper&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>滑动效果(<code>movable-area</code> 嵌套 <code>movable-view</code>)</li></ul><div class="language-wxml line-numbers-mode" data-ext="wxml"><pre class="language-wxml"><code>
&lt;movable-area class=&quot;ma&quot;
              style=&quot;height:{{maHeight}}px;margin-top:{{-mvDistance}}px&quot;
              catch:touchmove=&quot;noop&quot;&gt;
    &lt;movable-view class=&quot;mv&quot; direction=&quot;vertical&quot; y=&quot;{{mvDistance+(winHeight * 0.5)}}&quot;
                  style=&quot;height:{{cardHeight}}px&quot; inertia out-of-bounds
                  friction=&quot;{{10}}&quot;&gt;

        &lt;view class=&quot;content&quot;&gt;lots of content&lt;/view&gt;
    &lt;/movable-view&gt;
&lt;/movable-area&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>movable-area</code> 嵌套 <code>movable-view</code> 需要给宽度</p><div class="language-css line-numbers-mode" data-ext="css"><pre class="language-css"><code>  <span class="token selector">.ma</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.mv</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">getApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">cardHeight</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">winHeight</span><span class="token operator">:</span> app<span class="token punctuation">.</span>globalData<span class="token punctuation">.</span>sysInfo<span class="token punctuation">.</span>windowHeight<span class="token punctuation">,</span> <span class="token comment">// 屏幕尺寸</span>
        <span class="token literal-property property">maHeight</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">mvDistance</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">onReady</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">computeHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">computeHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> that <span class="token operator">=</span> <span class="token keyword">this</span>
        <span class="token keyword">const</span> query <span class="token operator">=</span> wx<span class="token punctuation">.</span><span class="token function">createSelectorQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        query<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&#39;.content&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        query<span class="token punctuation">.</span><span class="token function">selectViewport</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        query<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token literal-property property">safeArea</span><span class="token operator">:</span> <span class="token punctuation">{</span>bottom<span class="token punctuation">}</span><span class="token punctuation">,</span> screenHeight<span class="token punctuation">}</span> <span class="token operator">=</span> app<span class="token punctuation">.</span>globalData<span class="token punctuation">.</span>sysInfo
            <span class="token keyword">const</span> safeBottom <span class="token operator">=</span> screenHeight <span class="token operator">-</span> bottom
            <span class="token keyword">const</span> <span class="token punctuation">[</span>cards<span class="token punctuation">,</span> viewPort<span class="token punctuation">]</span> <span class="token operator">=</span> res
            <span class="token keyword">const</span> mvDistance <span class="token operator">=</span> res<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>bottom <span class="token operator">-</span> viewPort<span class="token punctuation">.</span>height <span class="token comment">// 隐藏的内容最大移动距离</span>
            <span class="token keyword">const</span> winHeight <span class="token operator">=</span> that<span class="token punctuation">.</span>data<span class="token punctuation">.</span>winHeight
            that<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">cardHeight</span><span class="token operator">:</span> res<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>height<span class="token punctuation">,</span> <span class="token comment">// 内容滑块高度</span>
                <span class="token comment">// 滑轨高度 = 内容滑块高度 + 内容滑块底部完全移动到屏幕底部所需要移动的距离 + 屏幕高度*系数(自定义系数（0-1），决定了滑块可以向下滑动多少距离)</span>
                <span class="token literal-property property">maHeight</span><span class="token operator">:</span> res<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>height <span class="token operator">+</span> mvDistance <span class="token operator">+</span> winHeight <span class="token operator">*</span> <span class="token number">0.7</span><span class="token punctuation">,</span>
                mvDistance <span class="token comment">// margin-top 距离</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="环境搭建" tabindex="-1"><a class="header-anchor" href="#环境搭建" aria-hidden="true">#</a> 环境搭建</h2>`,9),w={href:"https://blog.csdn.net/sinat_38184748/article/details/125519382",target:"_blank",rel:"noopener noreferrer"};function q(y,f){const a=p("ExternalLinkIcon");return c(),i("div",null,[u,n("ul",null,[r,n("li",null,[n("a",d,[s("微信小程序本地图片在开发工具显示手机预览不显示"),t(a)]),s(":"),k,s(" 只能用网络url或者base64 . 本地图片要用image标签才行")]),n("li",null,[n("a",v,[s("小程序图片闪烁"),t(a)]),s("是因为图片没有高度，加载时从最高高度变到(加载完完成，展示图片时)最适合高度。")])]),m,n("ul",null,[n("li",null,[n("a",b,[s("微信小程序中安全区域计算和适配"),t(a)])]),g]),h,n("p",null,[n("a",w,[s("webstorm 插件"),t(a)]),s("：WeChat mini program support")])])}const x=o(l,[["render",q],["__file","/home/runner/work/vuepress_blog/vuepress_blog/docs/.vuepress/.temp/pages/wechat/mini_program.html.vue"]]);export{x as default};
